<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>JacketCS CSP - Page 4: Floating Point</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../unit-4/lab-4/5-binary.html" rel="next">
<link href="../../unit-4/lab-4/3-representing-numbers.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script type="text/javascript" src="../../llab/loader.js"></script>


<link rel="stylesheet" href="../../css/bjc.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">JacketCS CSP</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../posts" rel="" target="">
 <span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-labs" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Labs</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-labs">    
        <li>
    <a class="dropdown-item" href="../../unit-1/index.html" rel="" target="">
 <span class="dropdown-text">Unit 1: Introduction to Programming</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../unit-2/index.html" rel="" target="">
 <span class="dropdown-text">Unit 2: Abstraction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../unit-3/index.html" rel="" target="">
 <span class="dropdown-text">Unit 3: Data Structures</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../unit-4/index.html" rel="" target="">
 <span class="dropdown-text">Unit 4: How the Internet Works</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../unit-5/index.html" rel="" target="">
 <span class="dropdown-text">Unit 5: Algorithms and Simulations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../unit-6/index.html" rel="" target="">
 <span class="dropdown-text">Unit 6: How Computers Work</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://snap.berkeley.edu/snap/snap.html" rel="" target="">
 <span class="menu-text">Snap<em>!</em></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../unit-4/index.html">Introduction to Programming</a></li><li class="breadcrumb-item"><a href="../../unit-4/lab-4/1-bits.html">Lab 4</a></li><li class="breadcrumb-item"><a href="../../unit-4/lab-4/4-floating-point.html">Page 4: Floating Point</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../unit-4/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Lab 1</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-1/1-what-is-internet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 1: What Is the Internet?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-1/2-network-redundancy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 2: Network Redundancy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-1/3-open-protocols.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 3: Internet Abstractions and Open Protocols</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-1/4-who-is-in-charge.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 4: Who’s In Charge of the Internet?</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Lab 2</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-2/1-cryptography.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 1: Cryptography</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-2/2-caesar-cipher.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 2: Caesar Cipher Project</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-2/3-asymmetric_cryptography.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 3: Public Key Encryption</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-2/4-who-cares-about-encryption.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 4: Who Cares About Encryption?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-2/5-security-risks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 5: Security Risks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-2/6-cybersecurity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 6: What Can You Do?</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Lab 3</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-3/1-ways-we-communicate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 1: Communication and Community</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-3/2-cyberbullying.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 2: Cyberbullying</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-3/3-censorship.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 3: Censorship</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-3/4-search-engines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 4: Search Engines</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-3/5-computing-world.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 5: Computing Around the World</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-3/6-benefits.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 6: Benefits of Computing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-3/7-collaboration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 7: Digital Collaboration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-3/8-planning-your-pathway.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 8: Planning Your Pathway</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Lab 4</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-4/1-bits.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 1: Bits</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-4/2-sequences.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 2: Binary Sequences</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-4/3-representing-numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 3: Representing Whole Numbers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-4/4-floating-point.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Page 4: Floating Point</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-4/5-binary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 5: Binary Representation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/lab-4/6-compression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Page 6: Data Compression</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Optional Projects</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/optional-projects/1-binary-counter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Binary Timer Project</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/optional-projects/2-tcp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reliable Transmission on Unreliable Networks: TCP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/optional-projects/1c-binarycounter-appendix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Binary Timer Appendix</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/optional-projects/writing-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing HTML (Teacher’s Choice)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../unit-4/optional-projects/1b-binary-counter-hints.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1b Binary Counter Hints</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Page 4: Floating Point</h1>
<p class="subtitle lead">Unit 4, Lab 4, Page 4</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="todo">
<p>
BH: Keep… But promote TIF A to a FYTD.
</p>
<p>
MF: lightly clean up to make the text more concise; do we really need to teach to this depth?
</p>
</div>
<div class="todo">
<p>Do we really need to teach this content to this depth? I think we could do justice to these ideas without as much text and detail. –MF, 9/26/18</p>
</div>
<div class="learn">
<p>
<strong>On this page,</strong> you’ll learn how computers store numbers that are not integers.
</p>
</div>
<p>
The way computers store numbers that are not integers is called <em>floating point</em>.
</p>
<div class="vocabFullWidth">
<p>
Scientific notation (such as 2,350,000 = 2.35 × 10<sup>6</sup>) uses powers of ten to represent very large or very small values. <strong>Floating point</strong> is the same idea but with powers of two.
</p>
</div>
<div class="endnote">
<p><a href="#hint-float" data-toggle="collapse" title="Where did that funny name come from?">Where did that funny name come from?</a></p>
<div id="hint-float" class="collapse">
<p>This non-obvious name is used because there used to be a <em>fixed point</em> non-integer notation with a <em>fixed</em> number of digits after the decimal <em>point.</em> For example, a fixed point notation with two digits after the decimal point was used to represent an amount of money in dollars and cents: $82.47. But today’s computers always use floating point for non-integer values.</p>
</div>
</div>
<p>
</p><div class="ap-standard">
<p>AAP-1.A.4</p>
</div>
<p>In Snap<em>!</em>, you can store any data type in a variable (number, text string, list, costume, <code>quiz item</code>, etc.). But in some languages, you have to declare what kind of data your variables will store. If you have a collection of values, it’s obvious that you’ll need a list to store it. But it’s not always obvious how best to represent a value in a computer program. For example, the most straightforward way to represent an amount of money is in <em>floating point</em> because it allows for decimals. But if you use floating point to store a value like 3.20, it’s likely to be displayed to the user as 3.2, and people rarely write money this way. Instead, even though it’s more programming effort, you might choose to create an abstract data type <code>money, dollars: ( ) cents: ( )</code> with two integer inputs so that you can control how the value is displayed.</p>
<p></p>
<div class="takeNote">
<div class="ap-standard">
<p>DAT-1.B.3</p>
</div>
<p>
Floating point allows computers to store very large numbers and also decimals, but the format still has a specific number of bits, and that limits the range of floating point values and mathematical operations just as with integers. However with floating point, values that exceed the limitation may result in <em>round off</em> errors instead.
</p>
</div>
<div id="first" class="forYouToDo">
<ol>
<li>
For example, try<img src="../../img/4-internet/one-third.png" title="(1)/(3)" alt="(1)/(3)"> once with bignums on and once with bignums off.
</li>
</ol>
</div>
<p>
The decimal representation of ⅓ is 0.33333… It has infinitely many digits, so the closest you can come in floating point isn’t <em>exactly</em> ⅓; it gets cut off after a while because your computer doesn’t have enough memory.
</p>
<p>
Roundoff errors can result in some pretty non-intuitive results…
</p>
<div class="commentBig">
<p>AC: This is maddening. If you enter 2/10 + 4/10, it adds the fractions and reports the reduced fraction. If you enter 76/10 + 87/10, it gives a decimal approximation. What’s the logic behind these choices? I’m missing something.<br> Al, I think you must have switched between bignums-on and bignums-off between trials. With bignums on I get correct exact rational answers for both. –bh</p>
</div>
<div class="forYouToDo">
<ol start="2">
<li>
Try <img src="../../img/4-internet/0.2+0.4.png" title="(0.2) + (0.4)" alt="(0.2) + (0.4)" class="inline"> and then try <img src="../../img/4-internet/7.6+8.7.png" title="(7.6) + (8.7)" alt="(7.6) + (8.7)" class="inline">.
</li>
</ol>
</div>
<p>
This isn’t a bug in Snap<em>!</em>, which is correctly reporting the result computed by the floating point hardware.
</p>
<div class="endnote">
<p><a href="#hint-roundoff" data-toggle="collapse" title="How can such simple computations get wrong results?">How can such simple computations get wrong results?</a></p>
<div id="hint-roundoff" class="collapse">
<p>These results seem surprising because a fractional value such as 0.2 can be represented exactly <em>in decimal</em> (unlike the example of ⅓). But <em>in binary,</em> only fractions whose denominator is a power of 2 can be represented exactly. So 2/16 can be represented exactly, but 2/10 can’t. The binary floating point representation of 0.2 is just slightly too big, and so is the binary representation of 0.4. Adding two slightly-too-big values produces an error big enough to get to the next higher representable value.</p>
</div>
</div>
<p>
No matter how good the hardware is, certain kinds of computations are likely to give severe errors in floating point. One simple example is subtracting two numbers that are almost equal in value. The correct answer will be near zero, and if it’s near enough, it will <em>underflow</em> and an exact zero might be reported.
</p>
<div class="endnote">
<p><a href="#hint-killer" data-toggle="collapse" title="Floating point errors can be very expensive and can even kill people">Floating point errors can be very expensive and can even kill people.</a></p>
<div id="hint-killer" class="collapse">
<div class="todo">
<p>Brian wants to add links to these references. –MF, 10/16/19</p>
</div>
<p>
A notorious example is the fate of the Ariane rocket launched on June 4, 1996 (European Space Agency 1996). In the 37th second of flight, the inertial reference system attempted to convert a 64-bit floating-point number to a 16-bit number, but instead triggered an overflow error which was interpreted by the guidance system as flight data, causing the rocket to veer off course and be destroyed.
</p>
<p>
The Patriot missile defense system used during the Gulf War was also rendered ineffective due to roundoff error (Skeel 1992, U.S. GAO 1992). The system used an integer timing register which was incremented at intervals of 0.1 s. However, the integers were converted to decimal numbers by multiplying by the binary approximation of 0.1, 0.00011001100110011001100<sub>2</sub> = 209715/2097152.
</p>
<p>
As a result, after 100 hours (3.6 × 10<sup>6</sup> ticks), an error of
</p>
<p class="indent">
</p><p><span class="katex">(-)(3600)= </span></p>
<p></p>
<p>
had accumulated. This discrepancy caused the Patriot system to continuously recycle itself instead of targeting properly. As a result, an Iraqi Scud missile could not be targeted and was allowed to detonate on a barracks, killing 28 people.
</p>
<p>
<small>From <em>Analog and Digital Conversion</em>, by Wikibooks contributors, <a href="https://en.wikibooks.org/wiki/Analog_and_Digital_Conversion/Fixed_Wordlength_Effects" title="Analog and Digital Conversion/Fixed Wordlength Effects" target="_blank">https://en.wikibooks.org/wiki/Analog_and_Digital_Conversion/Fixed_Wordlength_Effects</a></small>
</p>
</div>
</div>
<p>
Computer arithmetic on <em>integers</em> is straightforward. Either you get an exactly correct integer result or, if the result won’t fit in (non-bignum) integer representation, you get an <em>overflow error</em> and the result is, usually, converted to floating point representation (as 30! was).
</p>
<p>
By contrast, computer arithmetic on <em>floating point numbers</em> is hard to get exactly right. Prior to 1985, every model of computer had a slightly different floating point format, and all of them got wrong answers to certain problems. This situation was resolved by the <a href="https://en.wikipedia.org/wiki/IEEE_floating_point" target="_blank" title="IEEE 754">IEEE 754 floating point standard</a>, which is now used by every computer manufacturer and has been improved several times since it was created in 1985.
</p>
<div class="endnote">
<p><a href="#hint-alternatives" data-toggle="collapse" title="There are alternatives to floating point">There are alternatives to floating point.</a></p>
<div id="hint-alternatives" class="collapse">
<p>If the subtle errors in floating point computation turn out to be unacceptable in a particular application, software can use alternative representations:</p>
<ul>
<li>
<strong>Exact rationals.</strong> Two bignums, one for the numerator and one for the denominator, can be used to represent any fractional value exactly.
</li>
<li>
<strong>Binary coded decimal.</strong> A decimal digit can be represented in four bits, with a few four-bit combinations left over for a minus sign and a decimal point. A sequence of decimal digits of any length can be used to create decimal bignums, representing exactly any fractional value that takes a finite number of decimal digits. This would avoid the 0.2+0.4 problem, but wouldn’t work for problems involving ⅓.
</li>
<li>
<strong>Decimal floating point.</strong> If the binary coded decimal notation is extended with a four-bit code for “times ten to the power,” numbers in (base 10) scientific notation can be represented exactly.
</li>
</ul>
</div>
</div>
<p>
With bignums turned off, when a result is too large to be an integer, it is converted to floating point.<br> <img src="../../img/4-internet/bang30.png" title="(30) ! reporting 2.6525285981219103e+32" alt="(30) ! reporting 2.6525285981219103e+32" class="indent">
</p>
<div class="forYouToDo">
<ol start="3">
<li>
Try 200! again with bignums off.<br> <img src="../../img/4-internet/200bang-fixnum.png" title="((200) !) reporting infinity" alt="((200) !) reporting infinity">
</li>
</ol>
</div>
<p>
<strong>What’s going on?</strong> Although 200! is very large, it’s not “infinity.” This report is caused by the size limitation of the floating point format. If the result of a computation is bigger than than the range of numbers that can be stored, then the computer returns a special code that languages print as Infinity or ∞.
</p>
<div class="endnote">
<p>In floating point, there are special codes for infinity, –infinity (smaller than any finite value), and “Not a Number,” which is the notification used for illegal computations such as 0/0.<br> <img src="../../img/4-internet/zero-div-zero-reporting-NaN.png" title="(0) / (0) reporting NaN" alt="(0) / (0) reporting NaN" class="indent"></p>
</div>
<div class="takeItFurther">
<ol type="A">
<li>
Imagine a <em>decimal</em> floating point representation with one significant digit, and a range of exponents from 10<sup>-2</sup> to 10<sup>2</sup>. The smallest positive number representable in this notation is 0.01 (1×10<sup>-2</sup>) and the largest is 900 (9×10<sup>2</sup>). Sketch a number line from 0 to 1000 and mark all of the positive values representable in this notation. What can you say about the spacing of values? How many fractional values are representable? How many integer values less than 1000 are <em>not</em> representable? What are the strengths and weaknesses of this choice of representable values? (Real floating point has many more representable values, of course, but the way they’re spaced on the number line is similar to this.)
</li>
</ol>
</div>
<p>
</p><p><strong>How does a programming language know whether to interpret a bit sequence as an integer, a floating point, a text string of Unicode characters, an instruction, or something else?</strong></p>
<div class="comment">
<p>Does this explain my lament above? If so, can we move it up? <br> No, sorry. The type encoding works fine. In bignum mode you get correct answers. In non-bignum (floating point), the issue is that in <em>binary</em> floating point, 1/10 is an infinite fraction, like 1/3 in decimal. So roundoff errors are possible. –bh</p>
</div>
<p>Programming languages differ in how they do this, but there’s always some <em>extra</em> bit sequence that encodes the <em>data type</em> of any sequence of bits that tells the computer how to interpret it.</p>
<p></p>
<div class="takeNote">
<p>At the lowest level of software abstraction, <em>everything</em> in a computer is represented as a binary sequence. For example:</p>
<ul>
<li>
A Boolean value is a single bit, 0 for <code>false</code> and 1 for <code>true</code>.
</li>
<li>
A text string is a sequence of Unicode character codes, each of which is stored as a separate integer.
</li>
<li>
Lists and blocks are binary sequences too.
</li>
</ul>
</div>
<div class="endnote">
<p><a href="#hint-data-types" data-toggle="collapse" title="But different languages use data types differently">But different languages use data types differently.</a></p>
<div id="hint-data-types" class="collapse">
<p>
In well-designed languages (those based on Scheme, for example), that data type code is attached to the value itself. In other languages, when you make a variable, you have to say what type of value it will contain, and the data type is attached to the <em>variable</em>, so you can’t both get exact answers when the values are integers and also be able to handle non-integer values of the same variable. So instead of seeing:<br> <img src="../../img/4-internet/varfoo.png" title="script variables (foo)" alt="script variables (foo)" class="indent"><br> you see things like:<br> <img src="../../img/4-internet/intfoo.png" title="integer (foo)" alt="integer (foo)" class="indent"><br> In a language with <em>dynamic typing</em> (where you don’t have to declare the types of variables) it’s just as easy to make a list whose items are of different data types as it is to make one whose items are all the same type (all integers or all character strings, etc.)
</p>
<p>
Snap<em>!</em> has strengths that many programming languages do not, and it’s very likely that your <em>next</em> computer science class will use one of those other languages.
</p>
</div>
</div>
<div class="forYouToDo">
<ol start="4">
<li>
<div class="ap-standard">
<p>DAT-1.B</p>
</div>
<p><img src="../../img/icons/talk-with-your-partner.png" title="Talk with Your Partner" alt="Talk with Your Partner" class="inline">What are some consequences of using a fixed number of bits to represent numbers?</p>
</li>
</ol>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../unit-4/lab-4/3-representing-numbers.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Page 3: Representing Whole Numbers</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../unit-4/lab-4/5-binary.html" class="pagination-link">
        <span class="nav-page-text">Page 5: Binary Representation</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">The curriculum, text, and styling on this website is adapted from <a href="https://bjc.edc.org/bjc-r/">The Beauty and Joy of Computing</a> by University of California, Berkeley and Education Development Center, Inc.&nbsp;which is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>